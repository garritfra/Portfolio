{"pageProps":{"frontmatter":{"title":"Kubernetes is a domain specific database","date":"2022-09-22","tags":"note, 100DaysToOffload, infrastructure, kubernetes"},"markdownBody":"\nI just finished listening to [an\nepisode](https://kubernetespodcast.com/episode/129-linkerd/) of the Kubernetes\npodcast. In it, [Thomas Rampelberg](https://saunter.org/) makes an analogy that\nI think is worth sharing:\n\n> \"[...] Kubernetes is really a domain-specific database. And you need to look at it\nthat way. The YAML is literally writing a select statement or an insert\nstatement for a database. That's what the YAML is. And it's awesome that it is\nalready configured for how it is. And it's awesome that it's got a schema. But\nthe YAML is you writing an insert statement into Kubernetes. [...]\"\n\nThe Kubernetes API abstracts two types of states: desired state and actual\nstate. Whenever you apply a manifest, you update the *desired state* of the\ncluster, just like you do in a regular, non domain-specific database like\nPostgreSQL or Redis. Kubernetes then frequently compares the desired state with\nthe *actual* state of the cluster. If they don't match, Kubernetes will do\nwhatever it does to match these two states. Usually, this data is persisted\nusing a key-value database like [etcd](https://etcd.io/) running in a cluster,\nthough one could theoretically also hook up an external MySQL or Postgres\ndatabase for this purpose.\n\nI found this great diagram by [Tim\nDowney](https://downey.io/blog/desired-state-vs-actual-state-in-kubernetes/),\nshowing an oversimplified analogy of this pattern:\n\n![Thermostat\nExample](/assets/posts/2022-09-22-kubernetes-is-a-domain-specific-database/desired-state-hvac-diagram.png)\n\nYou *insert* your desired state into the system, and the system adjusts the\nactual state to match the desired state. In the case of thermostats the state is\na temperature. In Kubernetes, it's [resource\nobjects](https://kubernetes.io/docs/concepts/overview/working-with-objects/kubernetes-objects/)\n\nThis is post 037 of [#100DaysToOffload](https://100daystooffload.com/).\n\n"},"__N_SSG":true}