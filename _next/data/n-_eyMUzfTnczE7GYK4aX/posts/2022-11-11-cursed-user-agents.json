{"pageProps":{"frontmatter":{"title":"Cursed User-Agents","date":"2022-11-11","tags":"note, 100DaysToOffload, web"},"markdownBody":"\n> **Warning**: This is a rather ranty post. I just needed a place to dump my emotions about this topic. Please take it with a grain of salt. :)\n\nI'm currently [fiddling\naround](https://github.com/garritfra/ua-parser-js/pull/8) with User-Agents of\nSmart TVs, or more specifically [HbbTV](https://www.hbbtv.org/). Interpreting\nthem is an absolute nightmare, so let me rant about interesting edge-cases I\ndiscovered along the way.\n\nTo set the mood: User-Agents in this field have a standardized format, yet many\nvendors seem to do their own thing, making it impossible to build one parser to\nrule them all. For reference, here's what the HbbTV section in a user agent\nSHOULD look like:\n\n```\nHbbTV/<version> (<capabilities>; <vendorName>; <modelName>; <softwareVersion>; [<hardwareVersion>]; <familyName>; <reserved>)\n```\n\n## The \"we'll update that later\"\n\n```\nHbbTV/1.1.1 (; Loewe; MB180; 1.0; 1.0;) NetFront/4.1\n```\n\n1.0 for both software and hardware versions suspiciously looks like a working\ntitle. At least we get some information about the vendor and the model.\n\n## The Overcommitted\n\n```\nMozilla/5.0 (Linux armv7l) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.143 Safari/537.36 OPR/40.0.2207.0 OMI/4.9.0.237.DOM3-OPT.245 Model/Vestel-MB211 VSTVB MB200 HbbTV/1.2.1 (; JVC; MB211; 3.19.4.2; _TV_NT72563_2017 SmartTvA/3.0.0\n```\n\nIt's nice that we get a lot of information about the device, yet no one seemed\nto check if the string actually fits into storage.\n\n## The Lazy Boy\n\n```\nHbbTV/1.1.1 (;;;;;) Maple;2011\n```\n\nTo be fair, this is one of the earliest HbbTV devices ever. No one knew that\nthis technology would stand the test of time. Apparently not even Samsung.\n\n## Conclusion\n\nI learned that building a generic parser for user agents isn't easy, especially\nif the devices you work with could be over a decade old.\n\nOne thing that all devices do seem to get right though is the presence of the\nHbbTV section in the User-Agent. I did not encounter a single device without it.\n\nThis is post 042 of [#100DaysToOffload](https://100daystooffload.com/).\n"},"__N_SSG":true}