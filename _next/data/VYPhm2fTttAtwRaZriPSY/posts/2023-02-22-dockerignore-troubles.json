{"pageProps":{"post":{"slug":"2023-02-22-dockerignore-troubles","markdownBody":"\r\nI commonly used to create a `.Dockerignore` file next to my `Dockerfile`. After countless hours of ignoring the problems in my setup, I found out that the uppercase `.Dockerignore` doesn't get picked up by Docker on MacOS. Only the lowercase `.dockerignore` is valid.\r\n\r\nI didn't find official documentation on this, but I think it's because both MacOS and Linux are case-sensitive, while Windows isn't. I don't remember why I got used to the `.Dockerignore` convention, but I swear I saw someone using it in the wild. Or it's my (un)logical reasoning that, because `Dockerfile` is uppercased, `.Dockerignore` should be uppercased as well.\r\n\r\nEither way, stay away from `.Dockerfile`s and stick to `.dockerfile`s.\r\n\r\nThis is post 050 of [#100DaysToOffload](https://100daystooffload.com/).\r\n","frontmatter":{"title":"Dockerignore troubles","date":"2023-02-22","tags":"note, docker, web"},"tags":["note","docker","web"]},"recommendedPosts":[{"slug":"2023-06-01-single-page-applications-on-github-pages","markdownBody":"\nMy latest project, [sendpasswords.net](https://sendpasswords.net/) is a [Single Page Application](https://developer.mozilla.org/en-US/docs/Glossary/SPA) deployed on GitHub Pages.\n\nGitHub Pages is configured in a way to host static HTML files without any bells and whistles. This means that if you try to fetch a document that's *not* the index, for example `/foo`, the server will try to load the file with that name. \n\nBy nature, SPAs only consist of a single HTML entry point (`index.html` in most cases). It's responsible for routing the user to the correct page if there are multiple paths. And here's the crux: if the user tries to load `/foo`, he will not land at the SPA entry point. Instead, he will see a `404` error.\n\n## The solution\n\nA `404` response will automatically return a file called `404.html`, which we can use to our advantage. After building the application, simply copy the `index.html` to `404.html`, as demonstrated by [this commit](https://github.com/garritfra/sendpasswords.net/commit/66bdb68c229a3ac3386f7816a746155e658eb586). This will use `index.html` to serve the application on the root level, and `404.html` to load *the same app* if the page doesn't exist as a file. Whether the `index.html` is needed if there's already a `404.html` is up to you. I left it in to make clear that this is just a workaround.\n\nThis is a [well known](https://stackoverflow.com/a/69308662/9046809) workaround, but I wanted to bring some extra awareness to it, since it's a problem I ran into a couple of times so far. Happy SPAing!\n\n---\n\nThis is post 069 (nice) of [#100DaysToOffload](https://100daystooffload.com/).\n","frontmatter":{"title":"Single Page Applications on GitHub Pages","date":"2023-06-01","tags":"100DaysToOffload, guide, note, web, javascript, github"},"tags":["100DaysToOffload","guide","note","web","javascript","github"]},{"slug":"2023-04-12-instant-dark-theme","markdownBody":"\nThanks to [Jacksons](https://jacksonchen666.com/) [update to darktheme.club](https://github.com/garritfra/darktheme.club/pull/79), I just came across a neat little [CSS property](https://developer.mozilla.org/en-US/docs/Web/CSS/color-scheme) that turns a mostly CSS-free document into a pleasantly dark site:\r\n\r\n```css\r\n:root {\r\n  color-scheme: light dark;\r\n}\r\n```\r\n\r\nThis will adjust all elements on the page to the color scheme preferred by the user - without any other custom styles! ðŸ¤¯ It is also [widely supported](https://caniuse.com/mdn-css_properties_color-scheme) by browsers.\r\n\r\nI've always been quite dependent on CSS-frameworks for any project I'm starting. Going forward, I'd be interested to see how framework-less sites would feel using this property. If all else fails, there's always the awesome [simple.css](https://simplecss.org/) library, which you can slap on top of a raw document to make it pretty (and dark, if preferred) without using custom classes.\r\n\r\n---\r\n\r\nThis is post 064 of [#100DaysToOffload](https://100daystooffload.com/).\n","frontmatter":{"title":"Instant dark theme","date":"2023-04-12","tags":"100DaysToOffload, guide, note, learnings, web, css, til"},"tags":["100DaysToOffload","guide","note","learnings","web","css","til"]},{"slug":"2023-03-04-pods-vs.-containers","markdownBody":"\r\nIn Kubernetes, pods and containers are often confused. I found a [great article](https://iximiuz.com/en/posts/containers-vs-pods/) going over the differences of the two terms.\r\n\r\n> Containers and Pods are alike. Under the hood, they heavily rely on Linux namespaces and cgroups. However, Pods aren't just groups of containers. A Pod is a self-sufficient higher-level construct. All pod's containers run on the same machine (cluster node), their lifecycle is synchronized, and mutual isolation is weakened to simplify the inter-container communication. This makes Pods much closer to traditional VMs, [bringing back the familiar deployment patterns like sidecar or reverse proxy](https://www.mirantis.com/blog/multi-container-pods-and-container-communication-in-kubernetes/).\r\n\r\nIn my own words: Containers are made up of Linux namespaces and cgroups. Pods can be thought of as a cgroup of cgroups (though not really), mimicing the behavior of a virtual machine that runs multiple containers with a synchronized lifecycle. The containers in a pod are losely isolated, making it easy to communicate between each other. Containers in a pod can however set individual resource requests, enabled by Linux namespaces.\r\n\r\nI'd highly encourage you to check out [the original article](https://iximiuz.com/en/posts/containers-vs-pods/) if you want to learn more about this topic.\r\n\r\n---\r\n\r\nThis is post 053 of [#100DaysToOffload](https://100daystooffload.com/).\r\n","frontmatter":{"title":"Pods vs. Containers","date":"2023-03-04","tags":"note, kubernetes, infrastructure, docker, 100DaysToOffload"},"tags":["note","kubernetes","infrastructure","docker","100DaysToOffload"]},{"slug":"2023-03-03-notes-on-containerizing-php-applications","markdownBody":"\r\nI was recently tasked with building a rudimentary infrastructure for a PHP application. Coming from a Node.js-driven world where every human and their grandmother has a blog post about containerizing your application, it was very interesting to see where PHP differs to other applications.\r\n\r\nOne major gotcha for me was that PHP code is executed on **request-time**, meaning a new process is spawned for each incoming request. Most other languages have dedicated runtimes that handle incoming requests. This unique approach is very flexible and scalable, but it comes with the implication that there is a **separate webserver** that calls into the PHP interpreter when it needs to.\r\n\r\nIn Node.js (and most other languages), you can \"just run the app\", as demonstrated by this Dockerfile:\r\n\r\n```dockerfile\r\nFROM node:18.14.2-alpine3.17 AS build\r\n\r\nWORKDIR /usr/src/app\r\n\r\nCOPY package*.json ./\r\n\r\nRUN npm ci\r\n\r\nCOPY . .\r\n\r\nEXPOSE 3000\r\n\r\nCMD [ \"node\", \"server.js\" ]\r\n```\r\n\r\nPHP on the other side is rarely used on its own. Most of the time, it needs a webserver alongside it:\r\n\r\n```dockerfile\r\nFROM php:8.1-apache-bullseye\r\n\r\n# <snip>\r\n\r\nCOPY . /var/www/html\r\nWORKDIR /var/www/html\r\n\r\n# <snip>\r\n```\r\n\r\nAs you can see, I'm using the official PHP docker image. The PHP maintainers know that adding a webserver alongside PHP is a very common pattern, so most of the variants of the image ship with a webserver. In this example I'm using Apache, but we might as well use NGINX or some other webserver. There's also the option to use [FPM](https://www.php.net/manual/de/install.fpm.php) as a FastCGI implementation and a webserver in a **separate** container.\r\n\r\nGrasping this took me some time, but after it clicked it made many things a lot clearer.\r\n\r\n## More complete Dockerfile example\r\n\r\nThe Dockerfile above is meant to demonstrate how PHP applications differ from other languages. The following is a more complete example you can use to containerize your PHP application. In this case itâ€™s a Laravel app, so your mileage may vary.\r\n\r\n```dockerfile\r\nFROM php:8.1-apache-bullseye\r\n\r\nRUN apt-get clean && \\\r\n    apt-get update && \\\r\n    apt-get install --fix-missing -y \\\r\n        zip && \\\r\n    docker-php-ext-install \\\r\n        pdo \\\r\n        pdo_mysql \\\r\n        bcmath\r\n\r\nCOPY --from=composer:2 /usr/bin/composer /usr/bin/composer\r\n\r\nCOPY . /var/www/html\r\nWORKDIR /var/www/html\r\n\r\nENV APACHE_DOCUMENT_ROOT /var/www/html/public\r\n\r\nRUN composer install --no-dev --optimize-autoloader --no-interaction && \\\r\n    sed -ri -e 's!/var/www/html!${APACHE_DOCUMENT_ROOT}!g' /etc/apache2/sites-available/*.conf && \\\r\n    sed -ri -e 's!/var/www/!${APACHE_DOCUMENT_ROOT}!g' /etc/apache2/apache2.conf /etc/apache2/conf-available/*.conf && \\\r\n    php artisan config:cache && \\\r\n    php artisan view:cache && \\\r\n    php artisan route:cache && \\\r\n    php artisan storage:link && \\\r\n    chmod 777 -R /var/www/html/storage/ && \\\r\n    chown -R www-data:www-data /var/www/ && \\\r\n    a2enmod rewrite\r\n```\r\n\r\n---\r\nThis is post 052 of [#100DaysToOffload](https://100daystooffload.com/).\r\n","frontmatter":{"title":"Notes on containerizing PHP applications","date":"2023-03-03","tags":"note, infrastructure, docker, php, 100DaysToOffload"},"tags":["note","infrastructure","docker","php","100DaysToOffload"]},{"slug":"2023-02-19-til-about-css-insets","markdownBody":"\r\nJust a quick tip that I thought is worth sharing. Instead of declaring:\r\n\r\n```css\r\n.foo { \r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n}\r\n```\r\n\r\nyou can just use:\r\n\r\n```css\r\n.foo {\r\n  inset: 0;\r\n}\r\n```\r\n\r\nIt's supported everywhere computers are sold!\r\n\r\nMDN: https://developer.mozilla.org/en-US/docs/Web/CSS/inset\r\n\r\nSource: https://front-end.social/@estelle/109878532782943511\r\n\r\nThis is post 047 of [#100DaysToOffload](https://100daystooffload.com/).\r\n","frontmatter":{"title":"TIL about CSS Insets","date":"2023-02-19","tags":"web, note, til, quick-tip, css, 100DaysToOffload"},"tags":["web","note","til","quick-tip","css","100DaysToOffload"]}]},"__N_SSG":true}