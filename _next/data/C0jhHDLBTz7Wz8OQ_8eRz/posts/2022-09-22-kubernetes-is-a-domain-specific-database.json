{"pageProps":{"post":{"slug":"2022-09-22-kubernetes-is-a-domain-specific-database","markdownBody":"\nI just finished listening to [an\nepisode](https://kubernetespodcast.com/episode/129-linkerd/) of the Kubernetes\npodcast. In it, [Thomas Rampelberg](https://saunter.org/) makes an analogy that\nI think is worth sharing:\n\n> \"[...] Kubernetes is really a domain-specific database. And you need to look at it\n> that way. The YAML is literally writing a select statement or an insert\n> statement for a database. That's what the YAML is. And it's awesome that it is\n> already configured for how it is. And it's awesome that it's got a schema. But\n> the YAML is you writing an insert statement into Kubernetes. [...]\"\n\nThe Kubernetes API abstracts two types of states: desired state and actual\nstate. Whenever you apply a manifest, you update the _desired state_ of the\ncluster, just like you do in a regular, non domain-specific database like\nPostgreSQL or Redis. Kubernetes then frequently compares the desired state with\nthe _actual_ state of the cluster. If they don't match, Kubernetes will do\nwhatever it does to match these two states. Usually, this data is persisted\nusing a key-value database like [etcd](https://etcd.io/) running in a cluster,\nthough one could theoretically also hook up an external MySQL or Postgres\ndatabase for this purpose.\n\nI found this great diagram by [Tim\nDowney](https://downey.io/blog/desired-state-vs-actual-state-in-kubernetes/),\nshowing an oversimplified analogy of this pattern:\n\n![Thermostat\nExample](/assets/posts/2022-09-22-kubernetes-is-a-domain-specific-database/desired-state-hvac-diagram.png)\n\nYou _insert_ your desired state into the system, and the system adjusts the\nactual state to match the desired state. In the case of thermostats the state is\na temperature. In Kubernetes, it's [resource\nobjects](https://kubernetes.io/docs/concepts/overview/working-with-objects/kubernetes-objects/)\n\nThis is post 037 of [#100DaysToOffload](https://100daystooffload.com/).\n","frontmatter":{"title":"Kubernetes is a domain specific database","date":"2022-09-22","tags":"note, 100DaysToOffload, infrastructure, kubernetes, tech"},"tags":["note","100DaysToOffload","infrastructure","kubernetes","tech"]},"recommendedPosts":[{"slug":"2024-06-27-testing-smtp-connections","frontmatter":{"title":"Testing SMTP connections","date":"2024-06-27","tags":"infrastructure, guide, note, learnings, tech"},"tags":["infrastructure","guide","note","learnings","tech"]},{"slug":"2024-06-17-host-your-own-llm","frontmatter":{"title":"Host your own LLM","date":"2024-06-17","tags":"infrastructure, guide, note, homelab, tech, llm, ai"},"tags":["infrastructure","guide","note","homelab","tech","llm","ai"]},{"slug":"2024-06-03-i-just-cleaned-up-40-gb-of-brew-caches","frontmatter":{"title":"I just cleaned up 40 GB of Brew caches","date":"2024-06-03","tags":"guide, note, tech"},"tags":["guide","note","tech"]},{"slug":"2024-05-24-going-from-self-hosted-to-managed-software","frontmatter":{"title":"Going from self hosted to managed software","date":"2024-05-24","tags":"infrastructure, note, learnings, opinion, homelab, tech"},"tags":["infrastructure","note","learnings","opinion","homelab","tech"]},{"slug":"2024-04-15-beware-of-base64-encoded-strings","frontmatter":{"title":"Beware of base64 encoded strings","date":"2024-04-15","tags":"guide, note, learnings, web, til, tech, programming"},"tags":["guide","note","learnings","web","til","tech","programming"]}]},"__N_SSG":true}