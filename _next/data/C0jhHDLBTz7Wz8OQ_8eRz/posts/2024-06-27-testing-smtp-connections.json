{"pageProps":{"post":{"slug":"2024-06-27-testing-smtp-connections","markdownBody":"\nJust a quick note to my future self on how to test a SMTP connection with nothing but a tiny busybox container.\r\n\r\nIn my case specifically, I tested the connection from inside a Kubernetes cluster. Here's the quickest way to get a temporary pod up and running:\r\n\r\n```\r\nkubectl run -n backend -i --tty --rm debug --image=busybox --restart=Never\r\n```\r\n\r\nBusybox comes with telnet installed, which we can use to establish a connection to the server:\r\n\r\n```\r\n/ # telnet smtp.mydomain.com 25\r\nConnected to smtp.mydomain.com\r\n220 mail.mydomain.com ESMTP Postfix (SMTP)\r\n```\r\n\r\nNext, we can issue the SMTP commands through the open TCP connection to send a test mail. Lines beginning with a status code are server responses:\r\n\r\n```\r\nHELO smtp.mydomain.com\r\n250 smtp.mydomain.com\r\nMAIL FROM:<noreply@mydomain.com>                         \r\n250 2.1.0 Ok\r\nRCPT TO:<receiver@foo.com>\r\n250 2.1.5 Ok\r\nDATA  \r\n354 End data with <CR><LF>.<CR><LF>\r\nFrom: [noreply] <noreply@mydomain.com>\r\nTo: [Receiver] <receiver@foo.com>\r\nDate: Thu, 27 Jun 2024 10:08:26 -0200\r\nSubject: Test Message\r\n\r\nThis is a test message.\r\n\r\n.\r\n250 2.0.0 Ok: queued as 2478B7F135\r\n```\r\n\r\nIn case there's a firewall issue, you might not be able to establish a connection in the first place, or you won't get a reply to your TCP commands. In our case, everything worked fine.\r\n\r\nI hope this is useful!\n","frontmatter":{"title":"Testing SMTP connections","date":"2024-06-27","tags":"infrastructure, guide, note, learnings, tech"},"tags":["infrastructure","guide","note","learnings","tech"]},"recommendedPosts":[{"slug":"2024-06-17-host-your-own-llm","frontmatter":{"title":"Host your own LLM","date":"2024-06-17","tags":"infrastructure, guide, note, homelab, tech, llm, ai"},"tags":["infrastructure","guide","note","homelab","tech","llm","ai"]},{"slug":"2024-06-03-i-just-cleaned-up-40-gb-of-brew-caches","frontmatter":{"title":"I just cleaned up 40 GB of Brew caches","date":"2024-06-03","tags":"guide, note, tech"},"tags":["guide","note","tech"]},{"slug":"2024-05-24-going-from-self-hosted-to-managed-software","frontmatter":{"title":"Going from self hosted to managed software","date":"2024-05-24","tags":"infrastructure, note, learnings, opinion, homelab, tech"},"tags":["infrastructure","note","learnings","opinion","homelab","tech"]},{"slug":"2024-04-15-beware-of-base64-encoded-strings","frontmatter":{"title":"Beware of base64 encoded strings","date":"2024-04-15","tags":"guide, note, learnings, web, til, tech, programming"},"tags":["guide","note","learnings","web","til","tech","programming"]},{"slug":"2024-04-11-a-simple-search-bar","frontmatter":{"title":"A simple search bar","date":"2024-04-11","tags":"guide, note, meta, web, tech, programming"},"tags":["guide","note","meta","web","tech","programming"]}]},"__N_SSG":true}